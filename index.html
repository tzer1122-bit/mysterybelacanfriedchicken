<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Mystery Belacan Fried Chicken</title>
<style>
/* ---------- 基本样式 ---------- */
* { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Poppins', sans-serif;
  background: #fafafa;
  margin: 0;
  color: #333;
  min-height: 100vh;
  display: flex;
  flex-direction: row;
}

/* 左侧固定分类栏（桌面端） */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 150px;
  height: 100vh;
  background: #ffffff;
  box-shadow: 2px 0 6px rgba(0,0,0,0.08);
  padding: 18px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
  z-index: 20;
}
.cat-btn {
  border: none;
  border-radius: 10px;
  padding: 10px 8px;
  color: white;
  font-weight: 700;
  cursor: pointer;
  font-size: 14px;
  transition: transform .18s ease, box-shadow .18s ease;
  text-align: center;
}
.cat-btn:active { transform: translateY(1px); }
.cat-all { background: #9aa0a6; color: #fff; }
.cat-featured { background: #ff6b3d; }
.cat-original { background: #ffcf33; color: #000; }
.cat-snack { background: #00a4c4; }

/* highlight active */
.cat-btn.active {
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);
  transform: translateY(-2px);
}

/* 主内容区 */
.main {
  margin-left: 150px;
  flex: 1;
  padding: 0 18px 60px;
  min-height: 100vh;
}

/* header */
header {
  background: #ffcf33;
  padding: 20px 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  display: flex;
  align-items: center;
  gap: 12px;
  border-radius: 0 0 8px 8px;
}
header img { width: 84px; height: auto; border-radius: 50%; }
header h1 { margin: 0; font-size: 20px; }

/* status */
#status, #openNow, #closed {
  margin: 14px auto;
  border-radius: 8px;
  padding: 10px;
  max-width: 860px;
}
#status { background: #fff3cd; color: #856404; }
#openNow { background: #d4edda; color: #155724; font-weight: 700; }
#closed { background: #ffe8e8; color: #b30000; font-weight: 700; display: none; }

/* 菜单容器 */
.menu {
  max-width: 900px;
  margin: 14px auto;
  display: block;
  text-align: left;
  padding: 0 6px;
}

/* 单项卡片 */
.item {
  background: #fff;
  margin: 12px 0;
  padding: 14px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  display: block;
  opacity: 1;
  transform: translateY(0);
  transition: opacity .35s ease, transform .35s ease;
}

/* 隐藏时淡出 */
.item.hidden {
  opacity: 0;
  transform: translateY(8px);
  pointer-events: none;
  height: 0;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

/* 图片 */
.item img {
  width: 100%;
  max-width: 220px;
  display: block;
  margin: 0 0 10px 0;
  border-radius: 8px;
}

/* 标题与说明 */
.item h3 { margin: 0 0 6px 0; font-size: 18px; }
.item p { margin: 6px 0; color: #666; font-size: 14px; }

/* 数量区 */
.quantity {
  display: flex;
  align-items: center;
  gap: 8px;
  max-width: 160px;
  margin-top: 6px;
}
.quantity button {
  width: 34px; height: 34px;
  background: #ffcf33; border: none; border-radius: 8px;
  font-size: 18px; cursor: pointer;
}

/* 总计、付款区 */
#total {
  margin: 18px auto;
  padding: 12px;
  background: #fffbe6;
  border: 2px solid #ffcf33;
  border-radius: 10px;
  width: fit-content;
  font-weight: 700;
}
#duitnow {
  margin: 18px auto;
  padding: 16px;
  background: #fff;
  border-radius: 10px;
  max-width: 420px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}
#duitnow img { width: 200px; border-radius: 10px; }

/* WhatsApp 按钮 */
button#sendOrder {
  width: 100%;
  padding: 14px;
  background: #25D366; border: none; border-radius: 10px;
  color: #fff; font-weight: 800; font-size: 18px; cursor: pointer;
  box-shadow: 0 4px 10px rgba(37,211,102,0.3);
}
button#sendOrder[disabled] {
  background: #ccc; cursor: not-allowed; box-shadow: none;
}

/* 响应式调整：手机端固定顶部分类栏 */
@media (max-width: 820px) {
  body { flex-direction: column; }
  .sidebar {
    position: fixed; top:0; left:0; width:100%; height:auto;
    flex-direction: row; justify-content:center; padding:10px; gap:8px;
    box-shadow:0 2px 6px rgba(0,0,0,0.08); z-index:1000;
  }
  .main { margin-left:0; padding-top:70px; } /* 留出分类栏高度 */
  .cat-btn { flex:1 1 auto; font-size:13px; padding:8px; }
  .menu { padding:0 6px; }
}

/* 轻微动画：淡入淡出 */
.fade-in { animation: fadeIn .35s ease both; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(6px);} to { opacity:1; transform: translateY(0);} }
</style>
</head>
<body>

<!-- 欢迎音效 -->
<audio id="welcomeSound" src="welcome.mp3" preload="auto"></audio>

<!-- 分类栏 -->
<div class="sidebar" aria-hidden="false">
  <button class="cat-btn cat-all active" data-category="all">🌐 全部菜单</button>
  <button class="cat-btn cat-featured" data-category="featured">🔥 店家爆品</button>
  <button class="cat-btn cat-original" data-category="original">🍗 原味炸鸡</button>
  <button class="cat-btn cat-snack" data-category="snacks">🍟 小吃系列</button>
</div>

<!-- 主内容 -->
<div class="main">
  <header>
    <img src="logo.png" alt="Mystery Belacan Fried Chicken Logo">
    <h1>🍗 Mystery Belacan Fried Chicken</h1>
  </header>

  <div id="status">🕓 营业时间：下午 4:30 – 晚上 8:30（星期六休息）</div>
  <div id="openNow"></div>
  <div id="closed">🚫 今日休息或未营业，请于营业时间再来！</div>

  <div id="menuSection" class="menu">
    <!-- 爆品 -->
    <h2 class="section-title">🔥 店家爆品</h2>

    <div class="item" data-category="featured">
      <img src="popcorn.jpg" alt="Chicken Popcorn">
      <h3>Chicken Popcorn RM7.50</h3>
      <p>选择口味：</p>
      <p>原味</p>
      <div class="quantity">
        <button onclick="changeQty('popcorn_plain', -1)">-</button>
        <span id="qty-popcorn_plain">0</span>
        <button onclick="changeQty('popcorn_plain', 1)">+</button>
      </div>
      <p>盐酥</p>
      <div class="quantity">
        <button onclick="changeQty('popcorn_salty', -1)">-</button>
        <span id="qty-popcorn_salty">0</span>
        <button onclick="changeQty('popcorn_salty', 1)">+</button>
      </div>
      <p>海苔</p>
      <div class="quantity">
        <button onclick="changeQty('popcorn_seaweed', -1)">-</button>
        <span id="qty-popcorn_seaweed">0</span>
        <button onclick="changeQty('popcorn_seaweed', 1)">+</button>
      </div>
      <p>麻辣</p>
      <div class="quantity">
        <button onclick="changeQty('popcorn_spicy', -1)">-</button>
        <span id="qty-popcorn_spicy">0</span>
        <button onclick="changeQty('popcorn_spicy', 1)">+</button>
      </div>
      <p>起司</p>
      <div class="quantity">
        <button onclick="changeQty('popcorn_cheese', -1)">-</button>
        <span id="qty-popcorn_cheese">0</span>
        <button onclick="changeQty('popcorn_cheese', 1)">+</button>
      </div>
    </div>

    <div class="item" data-category="featured">
      <img src="fillet.jpg" alt="Chicken Breast Fillet">
      <h3>Chicken Breast Fillet RM7.50</h3>
      <p>原味</p>
      <div class="quantity">
        <button onclick="changeQty('fillet_plain', -1)">-</button>
        <span id="qty-fillet_plain">0</span>
        <button onclick="changeQty('fillet_plain', 1)">+</button>
      </div>
      <p>盐酥</p>
      <div class="quantity">
        <button onclick="changeQty('fillet_salty', -1)">-</button>
        <span id="qty-fillet_salty">0</span>
        <button onclick="changeQty('fillet_salty', 1)">+</button>
      </div>
      <p>海苔</p>
      <div class="quantity">
        <button onclick="changeQty('fillet_seaweed', -1)">-</button>
        <span id="qty-fillet_seaweed">0</span>
        <button onclick="changeQty('fillet_seaweed', 1)">+</button>
      </div>
      <p>麻辣</p>
      <div class="quantity">
        <button onclick="changeQty('fillet_spicy', -1)">-</button>
        <span id="qty-fillet_spicy">0</span>
        <button onclick="changeQty('fillet_spicy', 1)">+</button>
      </div>
      <p>起司</p>
      <div class="quantity">
        <button onclick="changeQty('fillet_cheese', -1)">-</button>
        <span id="qty-fillet_cheese">0</span>
        <button onclick="changeQty('fillet_cheese', 1)">+</button>
      </div>
    </div>

    <!-- 原味炸鸡 -->
    <h2 class="section-title">🍗 原味炸鸡</h2>

    <div class="item" data-category="original">
      <img src="wing.jpg" alt="Chicken Wing">
      <h3>Chicken Wing RM3.50</h3>
      <div class="quantity">
        <button onclick="changeQty('wing', -1)">-</button>
        <span id="qty-wing">0</span>
        <button onclick="changeQty('wing', 1)">+</button>
      </div>
    </div>

    <div class="item" data-category="original">
      <img src="drumstick.jpg" alt="Chicken Drumstick">
      <h3>Chicken Drumstick RM5.00</h3>
      <div class="quantity">
        <button onclick="changeQty('drumstick', -1)">-</button>
        <span id="qty-drumstick">0</span>
        <button onclick="changeQty('drumstick', 1)">+</button>
      </div>
    </div>

    <div class="item" data-category="original">
      <img src="thigh.jpg" alt="Chicken Thigh">
      <h3>Chicken Thigh RM5.00</h3>
      <div class="quantity">
        <button onclick="changeQty('thigh', -1)">-</button>
        <span id="qty-thigh">0</span>
        <button onclick="changeQty('thigh', 1)">+</button>
      </div>
    </div>

    <!-- 小吃系列 -->
    <h2 class="section-title">🍟 小吃系列</h2>

    <div class="item" data-category="snacks">
      <img src="wedges.jpg" alt="Cheesy Wedges">
      <h3>Cheesy Wedges RM6.50</h3>
      <div class="quantity">
        <button onclick="changeQty('wedges', -1)">-</button>
        <span id="qty-wedges">0</span>
        <button onclick="changeQty('wedges', 1)">+</button>
      </div>
    </div>

  </div> <!-- /menu -->

  <!-- 已选菜单清单 -->
  <div id="selectedList" style="max-width:900px;margin:20px auto;padding:10px;background:#fffbe6;border:2px solid #ffcf33;border-radius:10px;">
    <h3>📝 已选菜单清单</h3>
    <ul id="listItems" style="margin:0;padding-left:18px;"></ul>
  </div>

  <div id="total">🧾 总计：RM 0.00</div>

  <div id="duitnow">
    <h3>💳 请扫码通过 DuitNow 付款</h3>
    <img src="duitnow.jpg" alt="DuitNow QR">
    <p style="margin-top:10px;">付款后，请点击下方按钮，并在 WhatsApp 附上付款截图 📸</p>
    <button id="sendOrder" disabled>🚫 请先选择菜单</button>
  </div>
</div> <!-- /main -->

<script>
/* ---------- 欢迎音效 ---------- */
(function() {
  const audio = document.getElementById('welcomeSound');
  let played = false;
  function tryPlay() {
    if (played) return;
    audio.volume = 0.9;
    audio.play().then(()=>{ played = true; }).catch(()=>{});
  }
  tryPlay();
  function userInteractOnce() {
    tryPlay();
    window.removeEventListener('click', userInteractOnce);
    window.removeEventListener('touchstart', userInteractOnce);
  }
  window.addEventListener('click', userInteractOnce);
  window.addEventListener('touchstart', userInteractOnce);
})();

/* ---------- 分类筛选 ---------- */
const catButtons = document.querySelectorAll('.cat-btn');
catButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    catButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    filterCategory(btn.getAttribute('data-category'));
  });
});

function filterCategory(category) {
  const items = document.querySelectorAll('.item');
  items.forEach(it => {
    if(category==='all'|| it.getAttribute('data-category')===category){
      it.classList.remove('hidden');
      it.classList.add('fade-in');
      setTimeout(()=>it.classList.remove('fade-in'),400);
    } else {
      it.classList.add('hidden');
    }
  });
}

/* ---------- 数量、价格、清单 ---------- */
const qty = {
  popcorn_plain:0,popcorn_salty:0,popcorn_seaweed:0,popcorn_spicy:0,popcorn_cheese:0,
  fillet_plain:0,fillet_salty:0,fillet_seaweed:0,fillet_spicy:0,fillet_cheese:0,
  wing:0,drumstick:0,thigh:0,wedges:0
};
const prices = {
  popcorn_plain:7.5,popcorn_salty:7.5,popcorn_seaweed:7.5,popcorn_spicy:7.5,popcorn_cheese:7.5,
  fillet_plain:7.5,fillet_salty:7.5,fillet_seaweed:7.5,fillet_spicy:7.5,fillet_cheese:7.5,
  wing:3.5,drumstick:5,thigh:5,wedges:6.5
};
const nameMap = {
  popcorn_plain:"Chicken Popcorn (原味)",popcorn_salty:"Chicken Popcorn (盐酥)",popcorn_seaweed:"Chicken Popcorn (海苔)",
  popcorn_spicy:"Chicken Popcorn (麻辣)",popcorn_cheese:"Chicken Popcorn (起司)",
  fillet_plain:"Chicken Breast Fillet (原味)",fillet_salty:"Chicken Breast Fillet (盐酥)",fillet_seaweed:"Chicken Breast Fillet (海苔)",
  fillet_spicy:"Chicken Breast Fillet (麻辣)",fillet_cheese:"Chicken Breast Fillet (起司)",
  wing:"Chicken Wing",drumstick:"Chicken Drumstick",thigh:"Chicken Thigh",wedges:"Cheesy Wedges"
};

function changeQty(item,change){
  if(!(item in qty))return;
  qty[item]=Math.max(0,qty[item]+change);
  document.getElementById("qty-"+item).textContent=qty[item];
  updateTotal();
  updateList();
}

let isCurrentlyOpen = false;
  
function updateTotal(){
  let total=0;
  for(const k in qty) total+=qty[k]*(prices[k]||0);
  document.getElementById('total').textContent="🧾 总计：RM "+total.toFixed(2);

  const sendBtn=document.getElementById('sendOrder');
   if (!isCurrentlyOpen) {
  sendBtn.disabled = total===0;
  sendBtn.textContent = total===0?"🚫 请先选择菜单":"📩 发送 WhatsApp 下单";
  sendBtn.style.background=total===0?"#ccc":"#25D366";
  sendBtn.style.cursor=total===0?"not-allowed":"pointer";
}

function updateList(){
  const ul=document.getElementById('listItems');
  ul.innerHTML='';
  for(const k in qty){
    if(qty[k]>0){
      const li=document.createElement('li');
      li.textContent=`${nameMap[k]} × ${qty[k]}`;
      ul.appendChild(li);
    }
  }
}

/* ---------- 营业时间 ---------- */
const restDays=["Saturday"];
const openHour=16,openMinute=30,closeHour=20,closeMinute=30;
function checkBusinessHours(){
  const now=new Date();
  const dayName=now.toLocaleDateString('en-US',{weekday:'long'});
  const hour=now.getHours(),minute=now.getMinutes();
  const closedDiv=document.getElementById("closed");
  const openNow=document.getElementById("openNow");
  const sendBtn=document.getElementById("sendOrder");

  let isRestDay=restDays.includes(dayName);
  let isOpen=false;
  if(!isRestDay){
    const afterOpen=(hour>openHour)||(hour===openHour && minute>=openMinute);
    const beforeClose=(hour<closeHour)||(hour===closeHour && minute<=closeMinute);
    isOpen=afterOpen && beforeClose;
  }

  if(isRestDay||!isOpen){
    closedDiv.style.display="block";
    openNow.style.display="none";
    sendBtn.disabled=true;
    sendBtn.textContent="🚫 未营业，无法发送";
    sendBtn.style.background="#ccc";
    sendBtn.style.cursor="not-allowed";
    sendBtn.style.boxShadow="none";
  }else{
    closedDiv.style.display="none";
    openNow.style.display="block";
    openNow.textContent="✅ 正在营业中！欢迎下单～";
  }
}

/* ---------- WhatsApp 下单 ---------- */
document.getElementById("sendOrder").addEventListener("click",function(){
  if(this.disabled)return;
  const phone="60103715668";
  const now=new Date();
  const dateTime=now.toLocaleString("zh-CN",{hour12:false});
  let msg="🍗 Mystery Belacan Fried Chicken 下单通知\n\n";
  msg+="🕒 下单时间："+dateTime+"\n\n";

  let total=0;
  for(const k in qty){
    if(qty[k]>0){
      msg+=`- ${nameMap[k]} × ${qty[k]}\n`;
      total+=qty[k]*(prices[k]||0);
    }
  }
  msg+=`\n🧾 总计：RM ${total.toFixed(2)}\n\n请附上付款截图，谢谢！😊`;
  window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`,"_blank");
});

/* ---------- 初始化 ---------- */
updateTotal();
updateList();
checkBusinessHours();
isCurrentlyOpen = !isRestDay && isOpen;
setInterval(checkBusinessHours,60*1000);
</script>
</body>
</html>

